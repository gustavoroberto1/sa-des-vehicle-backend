generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ProductCategory {
  MOTOR      @map("Motor")
  PNEU       @map("Pneu")
  ELETRICO   @map("Elétrico")
  ACESSORIOS @map("Acessórios")
  OUTROS     @map("Outros")
}

enum Color {
  PRETO    @map("Preto")
  PRATA    @map("Prata")
  BRANCO   @map("Branco")
  CINZA    @map("Cinza")
  VERMELHO @map("Vermelho")
}

enum Optional {
  AR_CONDICIONADO   @map("Ár-Condicionado")
  DIRECAO_ELETRICA  @map("Direção Elética")
  CAMBIO_AUTOMATICO @map("Câmbio Automático")
  ARO_LIGA_LEVE     @map("Aro Liga Leve")
  BANCO_DE_COURO    @map("Bando de Couro")
  CAMERA_DE_RE      @map("Câmera de Ré")
}

model User {
  id        String   @id
  name      String
  email     String   @unique
  password  String
  createdAt DateTime
  updatedAt DateTime @updatedAt

  @@map("users")
}

model Mark {
  id        String    @id
  name      String    @unique
  createdAt DateTime
  updatedAt DateTime
  Product   Product[]

  @@map("marks")
}

model Product {
  id           String          @id
  name         String
  description  String
  category     ProductCategory
  amount       Int
  markId       String
  mark         Mark            @relation(fields: [markId], references: [id])
  createdAt    DateTime
  updatedAt    DateTime
  ProductModel ProductModel[]

  @@map("products")
}

model Model {
  id            String         @id
  name          String
  numberOfPorts Int
  fuelType      String
  ProductModel  ProductModel[]
  createdAt     DateTime
  updatedAt     DateTime
  Production    Production[]

  @@map("models")
}

model ProductModel {
  productId String
  modelId   String

  product Product @relation(fields: [productId], references: [id])
  model   Model   @relation(fields: [modelId], references: [id])

  @@id([productId, modelId])
  @@map("product_model")
}

model Production {
  id        String     @id
  modelId   String
  model     Model      @relation(fields: [modelId], references: [id])
  color     Color
  amount    Int
  optional  Optional[]
  createdAt DateTime
  updatedAt DateTime

  @@map("production")
}
